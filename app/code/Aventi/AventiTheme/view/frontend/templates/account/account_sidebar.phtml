<button id="sidebar-opener" class="btn-primary"><?php echo __('Mi account'); ?></button>


<script>
    require(['jquery'], function($) {
        var sidebar = '.sidebar',
            button = '#sidebar-opener',
            touchStartX = null,
            touchStartY = null;

        $(window).on('resize', function() {
            addButton();
            addPopupClass();
        });

        $(document).ready(function() {
            var width = $(window).width();
            if (width <= 1200) {
                var additionalHTML = '<div class="closeAccount"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z"/></svg> </div>';
                $('.sidebar .title.account-nav-title').append(additionalHTML);
                $('.sidebar .title.account-nav-title').on('click', '.closeAccount', function() {
                    closeSidebar();
                });
                $('.sidebar .title.account-nav-title .title').text('Mi cuenta');
            }
        });

        $(document).ready(function() {
            var additionalHTML = '<div class="icon-button"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M13 23V13h10v10H13Zm1.5-1.5h7v-.8q-.625-.775-1.525-1.238T18 19q-1.075 0-1.975.463T14.5 20.7v.8ZM18 18q.625 0 1.063-.438T19.5 16.5q0-.625-.438-1.063T18 15q-.625 0-1.063.438T16.5 16.5q0 .625.438 1.063T18 18Zm-6-6Zm.05-3.5q-1.45 0-2.475 1.025T8.55 12q0 1.2.675 2.1T11 15.35V13.1q-.2-.2-.325-.513T10.55 12q0-.625.438-1.063t1.062-.437q.35 0 .625.138t.475.362h2.25q-.325-1.1-1.238-1.8t-2.112-.7ZM9.25 22l-.4-3.2q-.325-.125-.613-.3t-.562-.375L4.7 19.375l-2.75-4.75l2.575-1.95Q4.5 12.5 4.5 12.337v-.674q0-.163.025-.338L1.95 9.375l2.75-4.75l2.975 1.25q.275-.2.575-.375t.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3t.562.375l2.975-1.25l2.75 4.75L19.925 11H17.4q-.025-.125-.05-.263t-.075-.262l2.15-1.625l-.975-1.7l-2.475 1.05q-.55-.575-1.213-.962t-1.437-.588L13 4h-1.975l-.35 2.65q-.775.2-1.437.588t-1.213.937L5.55 7.15l-.975 1.7l2.15 1.6q-.125.375-.175.75t-.05.8q0 .4.05.775t.175.75l-2.15 1.625l.975 1.7l2.475-1.05q.6.625 1.35 1.05T11 17.4V22H9.25Z"/></svg> </div>';
            $(button).append(additionalHTML);
        });

        $(document).ready(function() {
            addButton();
            addPopupClass();
        });

        $(document).on('click', '#sidebar-opener', function(event) {
            event.preventDefault();
            openSidebar();
        });

        function addPopupClass() {
            var width = $(window).width();
            if (width <= 1200 && !$(sidebar).hasClass('popup')) {
                $(sidebar).addClass('popup');
            } else if (width > 1200 && $(sidebar).hasClass('popup')) {
                $(sidebar).removeClass('popup');
            }
        }

        function addButton() {
            var width = $(window).width();
            if (width > 1200) {
                $(button).hide();
            } else {
                $(button).show();
            }
        }

        function openSidebar() {
            $(sidebar).toggleClass('open');
            $(button).toggleClass('open');
        }

        function closeSidebar() {
            $(sidebar).removeClass('open');
            $(button).removeClass('open');
        }
    });
</script>

<style>
    #sidebar-opener {
        display: none;
        box-sizing: border-box;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        padding: 0px 12px;
        gap: 4px;
        width: 109px;
        height: 40px;
        left: 47px;
        top: 234px;
        border: 1px solid;
        transition: all 0.3s ease;
    }

    .sidebar.popup.sidebar-main {
        transition: all 0.3s ease;
        position: fixed;
        top: 0;
        bottom: 30%;
        left: -200%;
        width: 300px;
        z-index: 9999;
        background-color: #fff;
        transition: left 0.3s ease-in-out;
        background: #f1f5fa;
        padding: 20px;
        height: 100%;
        max-width: 300px !important;
        margin: 0 !important;
    }

    .sidebar.popup.sidebar-additional {
        position: fixed;
        top: 70%;
        bottom: 0;
        left: -200%;
        width: 300px;
        z-index: 9999;
        background-color: #fff;
        transition: left 0.3s ease-in-out;
    }

    .sidebar.popup.open {
        left: 0;
    }
</style>